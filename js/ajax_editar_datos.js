function baja_alumno(e){let a="";const t=new FormData;t.append("id_alumno",document.querySelector("#id_alumno").value),t.append("baja",1==e.target.checked?1:0),a=1==e.target.checked?"Seguro que quiere dar de baja a este alumno/a ?":"Seguro que quiere quitar la baja a este alumno/a ?",alertify.confirm("Datos del alumno/a",a,(function(){fetch("ajax/ajax_editar_datos.php",{method:"POST",body:t}).then((e=>e.json())).then((function(e){console.log(e),alertify.success("Guardado correctamente.")})).catch((function(e){console.log(e),alertify.alert("Datos del alumno/a","Ocurrio un error al guardar los datos.")}))}),(function(){alertify.error("Cancelado"),1==e.target.checked?e.target.checked=!1:e.target.checked=!0}))}function editar_datos(e){let a=document.getElementsByTagName("input"),t=document.getElementsByTagName("textarea"),o="",l={},r=[],n={};for(let e=0;e<document.querySelectorAll("#nom_ape").length;e++)n={},n={id_familiar:document.querySelectorAll("#id_familiar")[e].value,nom_ape:document.querySelectorAll("#nom_ape")[e].value,vinculo:document.querySelectorAll("#vinculo")[e].value,tel_familiar:document.querySelectorAll("#tel_familiar")[e].value,observacion_familiar:document.querySelectorAll("#observacion_familiar")[e].value},r.push(n);for(let e=0;e<document.querySelectorAll("#actividad").length;e++)""!=document.querySelectorAll("#actividad")[e].value&&(o+=document.querySelectorAll("#actividad")[e].value+"|");l={id_alumno:document.querySelector("#id_alumno").value,apellido:document.querySelector("#apellido").value,nombre:document.querySelector("#nombre").value,foto_perfil:document.querySelector("#foto_base64").value,edad:document.querySelector("#edad").value,fecha_nac:document.querySelector("#fecha_nac").value,documento:document.querySelector("#documento").value,correo:document.querySelector("#correo").value,tel_alumno:document.querySelector("#tel_alumno").value,tel_fijo:document.querySelector("#tel_fijo").value,nacionalidad:document.querySelector("#nacionalidad").value,localidad:document.querySelector("#localidad").value,domicilio:document.querySelector("#domicilio").value,salud:document.querySelector("#salud").value,actividad:o,notas:document.querySelector("#notas").value,observacion_alumno:document.querySelector("#observacion_alumno").value},"Guardar datos"==e.target.textContent&&alertify.confirm("Datos del alumno/a","Seguro que quiere editar los datos de este alumno/a ?",(function(){fetch("ajax/ajax_editar_datos.php",{method:"POST",body:JSON.stringify({alumno:l,familiares:r})}).then((e=>e.json())).then((function(e){console.log(e),alertify.success("Guardado correctamente.")})).catch((function(e){console.log(e),alertify.alert("Datos del alumno/a","Ocurrio un error al guardar los datos.")}))}),(function(){alertify.error("Cancelado")}));for(let e=0;e<a.length;e++)"valor"!=a[e].id&&"efectivo"!=a[e].id&&"combo"!=a[e].id&&"fotoPerfil"!=a[e].id&&(1==a[e].readOnly?a[e].readOnly=!1:a[e].readOnly=!0);for(let e=0;e<t.length;e++)1==t[e].readOnly?t[e].readOnly=!1:t[e].readOnly=!0;"Editar datos"==e.target.textContent?e.target.textContent="Guardar datos":e.target.textContent="Editar datos"}function eliminar_alumno(){const e=new FormData;e.append("id",document.querySelector("#id_alumno").value),alertify.confirm("Datos del alumno/a","Seguro que quiere eliminar a este alumno/a ?",(function(){fetch("ajax/ajax_eliminar_alumno.php",{method:"POST",body:e}).then((e=>e.json())).then((function(e){console.log(e),alertify.error("Eliminado correctamente"),setTimeout((function(){window.location.href="index.php"}),2e3)})).catch((function(e){console.log(e),alertify.alert("Datos del alumno/a","Ocurrio un error al eliminar al alumno.")}))}),(function(){alertify.error("Cancelado")}))}function eliminar_familiar(e){const a=new FormData;a.append("id",e.target.parentNode.querySelector("#id_familiar").value),alertify.confirm("Datos del alumno/a","Seguro que quiere eliminar a este familiar/a ?",(function(){fetch("ajax/ajax_eliminar_familiar.php",{method:"POST",body:a}).then((e=>e.json())).then((function(e){console.log(e),alertify.error("Eliminado correctamente"),setTimeout((function(){location.reload()}),2e3)})).catch((function(e){console.log(e),alertify.alert("Datos del alumno/a","Ocurrio un error al eliminar al alumno.")}))}),(function(){alertify.error("Cancelado")}))}function agregar_actividad(){let e=document.getElementsByTagName("input")[6].readOnly;e=1==e?"readonly":"",document.querySelector("#nueva_actividad").insertAdjacentHTML("beforeend",'<div class="form-group col-md-12 float-left">\n                <label>Nueva actividad</label>\n                <i class="bi bi-dash-circle-dotted eliminar_actividad" title="Eliminar actividad" id="eliminar_actividad"></i>\n                <input list="actividades" class="form-control" id="actividad" '+e+">        \n            </div>")}function eliminar_actividad(e){let a=e.target.parentElement;a.querySelector("label").textContent,a.parentNode.removeChild(a)}window.addEventListener("click",(function(e){"editar_datos"==e.target.id&&editar_datos(e),"eliminar_actividad"==e.target.id&&eliminar_actividad(e),"agregar_actividad"==e.target.id&&agregar_actividad(e),"eliminar_alumno"==e.target.id&&eliminar_alumno(e),"eliminar_familiar"==e.target.id&&eliminar_familiar(e),"baja_alumno"==e.target.id&&baja_alumno(e)}));